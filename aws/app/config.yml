stackName: orma

stage: prod

buckets:
  internal: orma-d-deploy

lambdaProcessingRoleArn: {{iamroles.lambdaProcessingRoleArn}}

rds:
  name: openroads
  username: {{RDS_USER}}
  password: {{RDS_PASS}}

ecs:
  amiid: ami-9d1f7efe
  instanceType: t2.medium
  ecsInstanceProfileArn: arn:aws:iam::552819999234:instance-profile/orma-ecs
  volumeSize: 50
  vpcId: vpc-1dda3b78
  keyPairName: orma
  availabilityZone: '!Sub ${AWS::Region}a'
  maxInstances: 1
  desiredInstances: 1
  services:
    - count: 1
      name: vn
      containers:
        - name: webapp
          image: openroads/vn-api-app:0.2.0
          cpu: 100
          memory: 800
          ports:
            - container: 4000
              host: 80
              protocol: tcp
          envs:
            DATABASE_URL: {{DATABASE_URL}}
            AWS_DEFAULT_REGION: '!Sub ${AWS::Region}'
            AWS_REGION: '!Sub ${AWS::Region}'

# used as custom resource for cloudformation manipulation
#lambdas:
#- name: CustomBootstrap
#  handler: init-schema.handler
#  timeout: 100
#  memory: 256
#  source: 'db/lambda/init-schema.js'
